---
layout: layouts/post.njk
---

# 10人にした時のデータ

## Dr.Kの実験の結果

前回説明した完全に確実な実験を行った結果以下のようになりました．

![Lへの実験結果](/img/stats/Lへの実験結果.png)


薬Zを飲んだほうが，飲まない場合に比べて身長が3cm伸びています．つまり，薬の効果は+3cm身長を伸ばすことです．薬は明らかに効果があるので，子供Lにも薬Zを使用したところ，L'の場合と全く同じように1年で身長は9cm伸び，115cmになりました．


## 薬Zを集団に使うべき？

この結果から，Dr.Kは<stbl>薬ZをJ国の子供達にも使うべきか</stbl>を考え始めました．つまり，Dr.Kは個人に対してではなく，集団に対する意思決定を考え始めたのです．もう少し具体的に「J国の子供が5歳になった日に薬Z 20mgを1回内服させるべきか否か」という意思決定だとしましょう．

この意思決定の判断基準は何にすべきでしょうか？Lの場合には「Lの身長は薬Zで伸びるのか<small>(副作用やコストは小さいか)</small>」でしたので，これを子供達に拡張して，「薬によって子供たち**全員の**身長が，薬を飲まないときよりも伸びること」とするのはどうでしょうか．

これは厳しすぎるとDr.Kは考えました．例えば子供が100人いて，1人の身長は薬Zを飲むとむしろ伸びなくなり，11人は飲んでも飲まなくても変わらない，88人はとても伸びる，という結果であれば，薬Zを飲ませたほうがいいのだと．こうしてDr.Kは次の判断基準として妥当だと考えました．

<div class="border-l-8 border-yellow-400 bg-yellow-50 pt-2 px-4 rounded mb-4 mt-8">
5歳0日児に薬Z 20mg 1錠を使用した場合のほうが，使用しない場合よりも，6歳0日までの身長の伸びが<b>平均して</b>大きくなっていること
</div>

<div class="leading-4 text-sm mb-8">例えば，抗がん剤を考えると，8割の人にはよく効いて完治し，2割の人にはほとんど効かず副作用で苦しむだけ，というものでも，8割に効くのなら使用は正当化されます．Dr.Kの判断基準の正当化の根拠はこのあたりにあるかもしれません．</div>

この判断基準を，5人の5歳0日児を例に説明しましょう．Lのときと同じように，彼らをそれぞれ複製して，薬Zを飲むグループと飲まないグループに分け，6歳0日時での身長を調べます．<small>(今後，薬を飲むグループは**薬群**，飲まないグループは**プラセボ群**と呼びます．)</small>

![5人への実験の様子](/img/stats/5人への実験の様子.png)

結果は次の通りになりました．

<div id="5人への実験の結果" class="max-w-[100%] overflow-scroll my-12">
<table>
<thead>
<tr>
<th>子</th>
<th>5歳0日</th>
<th>6歳0日 薬+</th>
<th>6歳0日 薬-</th>
<th>薬の効果</th>
</tr>
</thead>
<tbody>
<tr>
<td>L</td>
<td>106.0cm</td>
<td>114.0cm</td>
<td>112.0cm</td>
<td class="bg-green-200">+2cm</td>
</tr>
<tr>
<td>M</td>
<td>102.5cm</td>
<td>111.4cm</td>
<td>108.1cm</td>
<td class="bg-green-200">+3.3cm</td>
</tr>
<tr>
<td>N</td>
<td>112.9cm</td>
<td>120.3cm</td>
<td>121.8cm</td>
<td class="bg-red-300">-1.5cm</td>
</tr>
<tr>
<td>O</td>
<td>107.2cm</td>
<td>114.4cm</td>
<td>113.6cm</td>
<td class="bg-green-200">+0.8cm</td>
</tr>
<tr class="border-b-2 border-black">
<td>P</td>
<td>108.1cm</td>
<td>115.0cm</td>
<td>114.5cm</td>
<td class="bg-green-200">+0.5cm</td>
</tr>
<tr>
<td>平均</td>
<td>107.34cm</td>
<td>115.02cm</td>
<td>114.0cm</td>
<td class="bg-yellow-200">+1.02cm</td>
</tr>
</tbody>
</table>
</div>

Lについては，もちろん先程と同じ結果ですが，ほかの４人についても薬を飲んだ場合(薬+)とプラセボを飲んだ場合(薬-)で差をとって，薬の効果を計算しています．

この結果から次のことが分かります．

- Nについては薬を飲まないほうがむしろ背が伸びる．
- 他の4人については薬を飲んだほうが背が伸びる．
- 5人に対する薬の効果の平均は，\\( \frac {2 + 3.3 -1.5 + 0.8 + 0.5}{5} = +1.02cm \\)．

3つ目の事実は，薬を飲んだほうが平均1.02cm伸びが大きいことを示しています．このように薬を飲んだほうが**平均して**身長が高くなるならば，たとえNのように薬を飲んで伸びが小さくなった人がいても，薬Zを使うことにする，というのがDr.Kの決断です．

さて，この薬による平均的な伸びの効果は，薬群とプラセボ群の平均差 \\( 115.02 - 114.0 = 1.02 \\)によっても求められるので，**薬の平均効果**を次のように定義することにします．

\\( 薬の平均効果 = 薬群の平均 - プラセボ群の平均\\)

今後，薬の効果というときには，薬の平均効果を意味します．

![平均を使って効果を表す](/img/stats/平均を使って効果を表す.png){.py-4}

<div class="text-sm">\( \mu^D \)という表記は薬群の平均を薬=Drugの頭文字Dと，平均を表すギリシャ文字μ(ミュー)を使って表したものです．μをD乗したものを表しているわけではないので注意してください．\( a_1 \)とか\( \mu_D \)のように下に添え字をつけるのと同じく，\( \mu^D \)のように上に添え字を付ける場合があるのです．\( \mu^P \)についても，プラセボ=PlaceboのPの平均μということを上に添え字を付ける形で表しています．</div>

実際に行うべき実験は，対象を5人の5歳0日児から，J国の5歳0日児に増やせばよいでしょう．そこで，理想的な実験手順は次の通りです．

1. 薬Zを使用する予定のJ国の5歳0日児を全員を集めてくる
2. 彼らをそれぞれ複製して，薬群とプラセボ群に分ける
3. 全く同じ生活をさせて6歳0日での各群の平均の差を薬の効果とする

![5人の子供の集団ver](/img/stats/5人の子供の集団ver.png){.py-4}

ステップ2の複製が困難なのは言うまでもありませんが．実はステップ1の「集める」も複製と同じくらい困難なのです．

まず，ステップ1の実施が必要なこと，つまり，「薬Zを使用する予定のJ国の5歳0日児の全員」<small>(以下これを**全員**と呼びます)</small>を集める必要があることを説明します．というのも，もし全員集める必要がないのなら，仮に実施が困難であっても，やらなければいいだけで問題ではないからです．

そこで，もし全員を集めてこないで，例えば先程の5人の結果だけで，薬を使うべきかを判断したとしましょう．しかし，この判断方法には問題があります．なぜなら，この5人の結果と全員の結果は一致するとは限らないからです．たまたまこの5人は薬がよく効いただけかもしれず，人数を増やせば違う結果になっていたかもしれません．例えば5人を追加して調べてみると，以下のような結果となるかもしれません．

<div id="10人への実験の結果，薬の効果がない場合" class="max-w-[100%] overflow-scroll my-12">
<table>
<thead>
<tr>
<th>子</th>
<th>5歳0日</th>
<th>6歳0日 薬+</th>
<th>6歳0日 薬-</th>
<th>薬の効果</th>
</tr>
</thead>
<tbody>
<tr>
<td>L</td>
<td>106.0cm</td>
<td>114.0cm</td>
<td>112.0cm</td>
<td class="bg-green-200">+2cm</td>
</tr>
<tr>
<td>M</td>
<td>102.5cm</td>
<td>111.4cm</td>
<td>108.1cm</td>
<td class="bg-green-200">+3.3cm</td>
</tr>
<tr>
<td>N</td>
<td>112.9cm</td>
<td>120.3cm</td>
<td>121.8cm</td>
<td class="bg-red-300">-1.5cm</td>
</tr>
<tr>
<td>O</td>
<td>107.2cm</td>
<td>114.4cm</td>
<td>113.6cm</td>
<td class="bg-green-200">+0.8cm</td>
</tr>
<tr class="border-b-2 border-black">
<td>P</td>
<td>108.1cm</td>
<td>115.0cm</td>
<td>114.5cm</td>
<td class="bg-green-200">+0.5cm</td>
</tr>
<tr>
<td>平均</td>
<td>107.34cm</td>
<td>115.02cm</td>
<td>114.0cm</td>
<td class="bg-yellow-200">+1.02cm</td>
</tr>
</tbody>
</table>
</div>

この結果は，さらに調べる人を追加すれば，再び変わるでしょう．結果が変わることがなくなる，つまり，薬の効果が確定するのは，全員の結果を調べた時です．だから，**完全に確実な方法**にしたければ，全員を集める必要があります．

しかし，誰を集めてくれば全員を集めたことになるのでしょうか．全員とは「薬Zを使用する予定のJ国の5歳0日児の全員」のことでした．そして，もし薬Zを使うということになれば，Zは5歳になったJ国の子供全員に例外なく使われる予定なのです．であれば，例えばちょうど来年に5歳になる子Uも薬Zの対象者です．ということは，全員の中にはUも含まれます．現実のUはまだ4歳ですが，薬の効果を調べるためには，5歳0日児のUを複製する必要があるので，全員に含まれるUとは，5歳0日児になった状態のUです．この5歳0日児のUへの効果を調べなければ，薬を使う予定の全員を調べたことにはならないので，完全に確実な方法とはいえません．

ということは例えば100年後に5歳になる子供達も，5歳になった状態で全員に含まれている必要があります．すなわち，全員とは，時を超えて，**今後5歳を迎えるJ国の子供達全てを，5歳にした状態で集めてきたもの**なのです．

![集団に含まれる人の図](/img/stats/全員とは誰か.png){.py-8}

ということで，人間の複製と同じくらいステップ1の「集める」にも困難があることが分かりますが，このように全員を集めてできる集団を<stbl>母集団</stbl>と呼ぶことにします．母集団の薬群とプラセボ群の身長差を調べれば，これはまさしく全員の結果なので，薬の真の平均的な効果を求められます．

一般的には，母集団とは，ある介入への効果を知りたい対象を全員集めてきたものです．それゆえ，誰への効果が知りたいのかで母集団は変わります．Dr.Kの例で薬を投与するのは，つまり介入の対象になるのは「J国の5歳0日児全員」なのでこれが母集団になりますが，もっと広く野望を持って，「全世界の5歳0日児全員」に薬を使うことを考えるなら，これが母集団になります．もしくは，ターゲットを絞って，「5歳0日時に平均身長よりも5cm以上低い子供達」だけに薬を投与するなら，これが母集団になります．介入する対象の範囲によって母集団が変わる，というのは非常に重要な観点ですので覚えておきましょう．

さて，一方で，母集団ではなく，例えば「ここ一週間でJ国で5歳を迎える全ての子供達(サンプル1)」を集めてきたのなら，これを<stbl>サンプル</stbl>といいます．サンプルは母集団の部分集合です．サンプルには「J国N市の年収2000万円以上でピンク人種の家庭で5歳を迎える子供達(サンプル2)」とか「両親の平均身長が180cm以上の5歳0日児(サンプル3)」とか色々なものを考えることができます．

![3つのサンプル](/img/stats/3つのサンプル.png){.py-4}

重要なのは，どのサンプルを使って薬の効果を調べても，その結果は母集団と完全には一致しないために不確実性が残るということです．全員でない限りは，そのサンプルに母集団から別の人間を追加すると，結果が変わることを思い出しましょう．

## 本当に母集団を調べる必要があるのか？

しかし，直観的には，

- 未来の子供も現在の子供も違いはないので，サンプル1への薬の効果は母集団とほとんど同じだろう
- サンプル2,3は，特殊な人達なので，薬の効果は母集団とは異なるものになるかもしれない

と思われます．この直観は正しいのですが，もう少し厳密に「母集団への効果とサンプルへの効果が同じと見なせるために必要な条件は何か」を理解することが次の目標になります．

![3つのサンプルと母集団，等しいとみなせるには？](/img/stats/3つのサンプルと母集団，等しいとみなせるには？.png){.py-8}

## ここまでのまとめ

集団への介入の効果を知りたければ，

0. 母集団を定義する．つまり誰を介入の対象とするかを定める．
1. 母集団を集める．
2. 母集団の1人１人を複製することで母集団を複製し，介入する群と介入しない群に分ける．
3. 両群の平均の差を介入の効果と考える．

ということになり，困難性は

1. 母集団を集めること
2. 母集団を構成する1人1人を複製すること

にあります．

そして<span class="text-2xl">1.</span>の困難は良いサンプルを得ることで解決できそうです．良いサンプルとは「母集団への介入の効果とサンプルへの介入の効果が同じと見なせる」ようなサンプルです．そこで，良いサンプルとなる条件，良いサンプルを集める方法を理解したいのですが，その前に<span class="text-2xl">2.</span>についても現実的な解決方法があることを見ていきます．そして，その解決策はそのまま良いサンプルを得る方法にもなっているのです．つまり，<span class="text-2xl">1.2.</span><b>には，ある一つの(とてもシンプルな)解決策がある</b>ことを理解することが1つのクライマックスです．頑張りましょう．

この後の流れ:
<span class="text-2xl">2.</span>の解決策を知る => <span class="text-2xl">1.</span>の解決にもそれが使えることに気づく



<div class="hidden">
    
    例えば，ある広告の20代男性への効果を知りたいときには，「広告を見る可能性のある20代男性全員」が母集団になりますし，広告のターゲットを変えて，「年収が300万円以下で消費者金融で一度でも融資を受けたことのある20代男性」とするなら，これが母集団になります．
    
</div>