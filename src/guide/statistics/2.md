---
layout: layouts/guide.njk
tags: stat
title: 集団への介入の効果を知る方法・その困難
order: 2
---

# 統計2 集団への介入の効果を知る方法と，その困難

## 2.1 <small>Dr.Kの実験結果</small>

完全に確実な実験を行った結果，以下のようになりました．

<img src="/img/stats/Lへの実験結果.png" alt="" class="mr-0 ml-auto my-4" width="400px" >

薬Zを飲んだほうが，飲まない場合に比べて身長が3cm伸びています．つまり，薬の効果は+3cm身長を伸ばすことです．薬は明らかに効果があるので，子供Lにも薬Zを使用したところ，L'の場合と全く同じように1年で身長は9cm伸び，115cmになりました．

## 2.2 <small>次なる意思決定</small>

この結果から，Dr.Kは**薬ZをJ国の子供達にも使うべきか**を考え始めました．つまり，Dr.Kは個人に対してではなく，集団に対する意思決定を考え始めたのです．もう少し具体的に「J国の子供が5歳になった日から毎晩薬Zを1錠20mg内服させるべきか」という意思決定だとしましょう．

この意思決定の判断基準は何にすべきでしょうか？

Lの場合には「Lの身長は薬Zで伸びるのか」だったので，これを子供達に拡張して，「薬によって子供たち**全員の**身長が，薬を飲まないときよりも伸びること」とするのはどうでしょうか．

これは厳しすぎるとDr.Kは考えました．例えば子供が100人に薬Zを使って，

- 1人の身長は薬Zを飲むとむしろ伸びなくなる．
- 11人は飲んでも飲まなくても変わらない
- 88人はとても伸びる

という結果であれば，薬Zを飲ませたほうがいいのだと考えます．こうしてDr.Kは次の判断基準として妥当だと考えました．

薬Zを使用した場合のほうが，使用しない場合よりも，身長の伸びが<b>平均して</b>大きくなっていること

## 2.3 <small>薬の効果の判断基準</small>

この判断基準を，5人の5歳0日児を例に説明しましょう．Lのときと同じように，彼らをそれぞれ複製して，薬Zを飲むグループと飲まないグループに分け，20歳0日時での身長を調べます．今後，薬を飲むグループは**薬群，介入群**，飲まないグループは**プラセボ群，コントロール群**などと呼びます．

<img src="/img/stats/5人への実験の様子.png" alt="" class="mr-0 ml-auto my-4" width="400px" >

結果は次の通りになりました．ただし，

$$
薬Zの効果 = 薬Zありの身長 - 薬Zなしの身長
$$

で定義しています．

<div id="5人への実験の結果" class="my-12" style="overflow-x:auto;">
<table>
<thead>
<tr>
<th>子</th>
<th>5歳0日</th>
<th>6歳0日 薬+</th>
<th>6歳0日 薬-</th>
<th>薬の効果</th>
</tr>
</thead>
<tbody>
<tr>
<td>L</td>
<td>106.0cm</td>
<td>114.0cm</td>
<td>112.0cm</td>
<td class="bg-green-200">+2cm</td>
</tr>
<tr>
<td>M</td>
<td>102.5cm</td>
<td>111.4cm</td>
<td>108.1cm</td>
<td class="bg-green-200">+3.3cm</td>
</tr>
<tr>
<td>N</td>
<td>112.9cm</td>
<td>120.3cm</td>
<td>121.8cm</td>
<td class="bg-red-300">-1.5cm</td>
</tr>
<tr>
<td>O</td>
<td>107.2cm</td>
<td>114.4cm</td>
<td>113.6cm</td>
<td class="bg-green-200">+0.8cm</td>
</tr>
<tr class="border-b-2 border-black">
<td>P</td>
<td>108.1cm</td>
<td>115.0cm</td>
<td>114.5cm</td>
<td class="bg-green-200">+0.5cm</td>
</tr>
<tr>
<td>平均</td>
<td>107.34cm</td>
<td>115.02cm</td>
<td>114.0cm</td>
<td class="bg-yellow-200">+1.02cm</td>
</tr>
</tbody>
</table>
</div>

この結果から次のことが分かります．

- Nは薬Zを飲まないほうが背が伸びる．つまりNに対する薬の効果は負．
- 他の4人については薬を飲んだほうが背が伸びる．
- 5人に対する薬の効果の平均は，\\( \frac {2 + 3.3 -1.5 + 0.8 + 0.5}{5} = +1.02cm \\)．
{.pt-4}

3つ目の事実は，薬を飲んだほうが**平均して**1.02cm身長が高くなることを示しています．このように**平均して**高くなるならば，たとえNのように薬を飲んで身長が小さくなった人がいても，薬Zを使うことにする，というのがDr.Kの決断です．

## 2.4 <small>薬Zの平均効果の定義</small>

さて，この薬による平均的な身長への効果は，薬群とプラセボ群の平均差 \\( 115.02 - 114.0 = 1.02 \\)によっても求められます．そこで今後は，

<div class="max-md:text-sm pt-4">
$$
薬Zの平均効果 = 薬群の平均 - プラセボ群の平均
$$
</div>

で求めることにします．これ以降，薬の効果というときには，薬の平均効果を意味します．

<img src="/img/stats/平均を使って効果を表す.png" alt="" class="mr-0 ml-auto my-4" width="400px" >

<div class="text-sm">\( \mu^D \)という表記は薬群の平均を薬=Drugの頭文字Dと，平均を表すギリシャ文字μ(ミュー)を使って表したものです．μをD乗したものを表しているわけではないので注意してください．\( a_1 \)とか\( \mu_D \)のように下に添え字をつけるのと同じく，\( \mu^D \)のように上に添え字を付ける場合があるのです．\( \mu^P \)についても，プラセボ=PlaceboのPの平均μということを上に添え字を付ける形で表しています．</div>


## 2.5 <small>薬の効果を調べる完全に確実な方法 集団ver.</small>

以上からLのときと同様に考えると，薬の効果を知るための完全に確実な方法は次の通りです．

1. 薬Zを使用する予定のJ国の5歳0日児を全員を集めてくる
2. 彼らをそれぞれ複製して，薬群とプラセボ群に分ける
3. 全く同じ生活をさせて20歳0日での各群の平均の差を薬の効果とする
{.pt-4}

<img src="/img/stats/5人の子供の集団ver.png" alt="" class="mr-0 ml-auto my-4" width="450px" >

ステップ2の複製が困難なのは言うまでもありませんが．実はステップ1の「集める」も複製と同じくらい困難なのです．

## 2.6 <small>全員を集める必要があること</small>

まず，ステップ1の実施が必要なこと，つまり，「薬Zを使用する予定のJ国の5歳0日児全員」<small>(以下これを**全員**と呼びます)</small>を集める必要があることを説明します．というのも，もし全員集める必要がないのなら，仮に実施が困難であっても，やらなければいいだけで問題ではないからです．

そこで，もし全員を集めてこないで，例えば先程の5人の結果だけで，薬を使うべきかを判断したとしましょう．しかし，この判断方法には問題があります．なぜなら，この5人の結果と全員の結果は一致するとは限らないからです．たまたまこの5人は薬がよく効いただけかもしれず，人数を増やせば違う結果になっていたかもしれません．例えば5人を追加して調べてみると，以下のような結果となるかもしれません．

<div id="10人への実験の結果，薬の効果がない場合" class="my-12" style="overflow-x:auto;">
<table>
<thead>
<tr>
<th>子</th>
<th>5歳0日</th>
<th>6歳0日 薬+</th>
<th>6歳0日 薬-</th>
<th>薬の効果</th>
</tr>
</thead>
<tbody>
<tr>
<td>L</td>
<td>106.0cm</td>
<td>114.0cm</td>
<td>112.0cm</td>
<td class="bg-green-200">+2cm</td>
</tr>
<tr>
<td>M</td>
<td>102.5cm</td>
<td>111.4cm</td>
<td>108.1cm</td>
<td class="bg-green-200">+3.3cm</td>
</tr>
<tr>
<td>N</td>
<td>112.9cm</td>
<td>120.3cm</td>
<td>121.8cm</td>
<td class="bg-red-300">-1.5cm</td>
</tr>
<tr>
<td>O</td>
<td>107.2cm</td>
<td>114.4cm</td>
<td>113.6cm</td>
<td class="bg-green-200">+0.8cm</td>
</tr>
<tr class="border-b-2 border-black">
<td>P</td>
<td>108.1cm</td>
<td>115.0cm</td>
<td>114.5cm</td>
<td class="bg-green-200">+0.5cm</td>
</tr>
<tr>
<td>平均</td>
<td>107.34cm</td>
<td>115.02cm</td>
<td>114.0cm</td>
<td class="bg-yellow-200">+1.02cm</td>
</tr>
</tbody>
</table>
</div>

この結果は調べる人をさらに追加すれば，再び変わるでしょう．そこで，全員を調べれば，もう追加すべき人はいなくなり，結果が変わることはなくなります．つまり，薬の効果が確定するのは，全員の結果を調べた時です．だから，**完全に確実な方法**にしたければ，全員を集めて，全員の結果を調べる必要があります．


## 2.7 <small>全員とは誰か？</small>

しかし，どうすれば全員を集めて，全員の結果を調べたことになるのでしょうか．Zは<small>(もし使われるとすれば)</small>5歳になったJ国の子供全員に例外なく使われるとしましょう．

であれば「ちょうど来年に5歳になる子U」も「35年後に生まれ，40年後に5歳になる子Q」も薬Zを使う子供達の1人です．であればUに対する薬の効果も，Qに対する薬の効果も調べる必要があります．

彼らへの薬の効果を調べるためには

1. 時間を操作してUもQも5歳0日児とする
2. UとQを複製して，薬を与えるものと与えないものをつくる
3. 20歳になったUとQの差を見る
{.pt-4}

ということが必要になります．

## 2.8 <small>母集団を調べることで薬の真の効果を求められる</small>

以上から「全員を集める」とは，**今後J国で5歳を迎える子供達全てを，時を操作して5歳にした状態で集める**ことになります．人間の複製と同じくらい「集める」ことにも困難があることが分かりますが，このように全員を集めてできる集団を**母集団**と呼びます．

母集団の薬群とプラセボ群の身長差を調べれば，これはまさしく全員の結果なので，薬の真の平均的な効果を求められます．母集団の平均や分散のことを**母平均**とか，**母分散**と言います．$µ^D$は薬群の母平均であり，$µ^P$はプラセボ群の母平均です．

<img src="/img/stats/5人の子供の集団ver.png" alt="" class="mr-0 ml-auto my-4" width="450px" >

## 2.9 <small>母集団とは介入の対象を全て集めたものである</small>

一般的には，母集団とは，ある介入への効果を知りたい対象を全員集めてきたものです．それゆえ，誰への効果が知りたいのかで母集団は変わります．Dr.Kの例で薬を投与するのは，つまり介入の対象になるのは「J国の5歳0日児全員」なのでこれが母集団になりますが，もっと広く野望を持って，「全世界の5歳0日児全員」に薬を使うことを考えるなら，これが母集団になります．もしくは，ターゲットを絞って，「5歳0日時に平均身長よりも5cm以上低い子供達」だけに薬を投与するなら，これが母集団になります．介入する対象の範囲によって母集団が変わる，というのは非常に重要な観点ですので覚えておきましょう．

## 2.10　<small>現実に調べられるのはサンプルだけ</small>

さて，一方で，母集団ではなく，例えば「ここ一週間でJ国で5歳を迎える全ての子供達(サンプル1)」を集めてきたのなら，これを**サンプル**とか**標本**といいます．サンプルは母集団の部分集合です．サンプルには「J国N市の年収2000万円以上でピンク人種の家庭で5歳を迎える子供達(サンプル2)」とか「両親の平均身長が180cm以上の5歳0日児(サンプル3)」とか色々なものを考えることができます．

<img src="/img/stats/3つのサンプル.png" alt="" class="mr-0 ml-auto my-4" width="450px" >

重要なポイントは，

- 現実的に私たちが調べられるのはサンプルのみ
- どのサンプルを使って薬の効果を調べても，その結果は母集団と完全には一致しないために不確実性が残る
{.pt-4}

ということです．

## 2.11　<small>よいサンプルがあれば母集団を調べる必要はないという直観</small>

しかし，直観的には，

- 未来の子供も現在の子供も違いはないので，ここ1週間でJ国で5歳を迎える子供達(サンプル1)を順次複製していき，彼らへの薬の効果を調べれば，それは母集団へ効果とおおよそ一致するだろう．
- 一方で，社会階級が上だったり(サンプル2)，両親の身長が高かったり(サンプル3)する子供だけを集めても，それは母集団を代表しているとは考えられないので，彼らへの薬の効果は母集団とは異なるものになるかもしれない．
{.pt-4}

と思われます．サンプルについて実験を行った場合の平均や分散をサンプル平均やサンプル分散と言います．$m^D$はサンプルの薬群のサンプル平均であり，$m^P$はサンプルのプラセボ群のサンプル平均です．

![サンプルの場合の実験]()

この直観は正しいのですが，それでは，母集団への効果とサンプルへの効果が同じと見なせるために必要な条件は何でしょうか．

<img src="/img/stats/3つのサンプルと母集団，等しいとみなせるには？.png" alt="" class="mr-0 ml-auto my-4" width="450px" >

## 2.12 <small>まとめ</small>

集団への介入の効果を知る方法

0. 母集団を定義する．つまり誰を介入の対象とするかを定める．
1. 母集団を集める．
2. 母集団の1人１人を複製することで母集団を複製し，介入する群と介入しない群に分ける．
3. 両群の平均の差を介入の効果と考える．
{.pt-4}

困難

1. 母集団を集めること
2. 母集団を構成する1人1人を複製すること
{.pt-4}

困難1.は，母集団への介入の効果とサンプルへの介入の効果が同じと見なせるような良いサンプルを調べることで解決できます．そこで，良いサンプルとなる条件，良いサンプルを集める方法が気になりました．

この問題に取り組む前に，困難2.についても現実的な解決方法があることを見ていきます．そしてその方法は困難1も解決がすぐに分かります．つまり，困難1.2.には，ある一つの(とてもシンプルな)解決策があるのです．これが1つのクライマックスです．頑張りましょう．

この後の流れ:
困難2.の解決策を知る => 困難1.の解決にもそれが使えることに気づく

<hr class="my-8 ">

## 2.13 <small>次に進む前に</small>

母集団とサンプルの違いを明確にすることは統計を理解するために非常に重要です．次の6つを調べるうえで，母集団とサンプルは何かを考えてみましょう．

1. 高校生の学力調査
2. 視聴率
3. お客様満足度
4. 内閣支持率
5. 0歳6ヶ月のネズミに成長ホルモン注射が及ぼす影響
6. ある日に工場で生産した椅子Xの耐久性

解答{.mt-24}

<div style="overflow-x:auto;">
<table class="my-4" >
<thead>
<tr>
	<th class="column-1">*</th><th class="column-2">母集団</th><th class="column-3">サンプル</th>
</tr>
</thead>
<tbody>
<tr class="row-2 even">
	<td class="column-1">高校生の学力調査</td><td class="column-2">全ての高校生</td><td class="column-3">学力調査テストを受けた高校生</td>
</tr>
<tr>
	<td class="column-1">視聴率</td><td class="column-2">テレビを所有する全ての世帯</td><td class="column-3">視聴率調査対象の一部の世帯</td>
</tr>
<tr >
	<td class="column-1">お客様満足度</td><td class="column-2">全てのお客様</td><td class="column-3">アンケートに答えた一部のお客様</td>
</tr>
<tr>
	<td class="column-1">内閣支持率</td><td class="column-2">全ての有権者</td><td class="column-3">調査対象の一部の有権者</td>
</tr>
<tr>
	<td class="column-1 text-xs">0歳6ヶ月のネズミに<br>成長ホルモン注射が及ぼす影響</td><td class="column-2 text-xs">(過去・現在・未来において)<br>この世に存在する<br>全ての6ヶ月のネズミ</td><td class="column-3">実験室で調べることにした<br>10匹の6ヶ月ネズミ</td>
</tr>
<tr>
	<td class="column-1 text-xs">ある日に工場で生産した<br>椅子Xの耐久性</td><td class="column-2 text-xs">その日に生産した<br>すべての椅子X</td><td class="column-3">抜き取ったいくつかの椅子X</td>
</tr>
</tbody>
</table>
</div>

<div class="text-xs text-right">参考にしたサイト:<a href="https://ai-trend.jp/basic-study/basic/sample-space/" target="_blank" rel="noopener noreferrer">標本と母集団の違いがすぐわかる解説 | AVILEN AI Trend</a></div>
