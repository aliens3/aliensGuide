---
layout: layouts/post.njk
---

# ランダム割当でも揺らぎが生じることの説明をついか 実際の実験手順.png 「同じ分布」を追加,?を小さく

## ランダムサンプリングにより二つの困難を解消する

2集団が同一であるとは，2集団のあらゆる性質の分布が等しいこと，と定義しました．では，実際にあらゆる性質，私たちが知ることのできる性質も，知り得ない性質も全てが等しいような2集団はどうやって作るのでしょうか．

<div class="text-sm leading-[22px] my-4">逆に，もし2集団の分布が何かしらの点で異なる場合，例えば，身長の伸びを促進する遺伝子Gの分布が異なっていれば，薬の効果と思っていたものは，実はこの遺伝子Gの分布の差に起因していたことがありえ，集団の平均差が薬の効果とはいえなくなります．つまり「薬の効果といっているけど，薬を使った群は，遺伝子Gをたくさんもっている人が多いのだから，これが薬群の身長の伸びが良かった原因で，薬の効果が原因ではないかもしれないよね？」などと反論される可能性があります．</div>

その方法が<stbl>ランダムサンプリング</stbl>です．

<div class="border-l-8 border-blue-700 bg-blue-100 py-2 px-4 rounded my-8">
<div class="leading-[34px]"><b>ランダムサンプリング</b>とは，集団からその構成員をランダムに選ぶ<small>(サンプリングする)</small>こと．
</div></div>

例えばある1万人の5歳0日児を集めた集団Qの身長の分布は次のとおりでした．

集団Qの身長分布
![集団Qの身長データ](/img/stats/集団Qの身長分布.png)

この集団Qからランダムに100人を選んで集団Rを作ると，QとRのすべての性質の分布は同じになります．つまり，ランダムサンプリングで作られたRは元の集団Qと同一の集団になるのです．

まずはQとRの身長の分布が等しくなることから説明しましょう．Qからランダムサンプリングするとき，例えば104-105cmの人がでる確率は集団Qの分布から0.08=8%になります，であれば，100人サンプリングすると，104-105cmの人は平均して\\(0.08 \cdot 100 = 8\\)人となり，これを全体の人数100で割って割合にすれば，0.08となってQと一致します．他の身長についても，同様に考えるとQとRで割合は同じになることが分かります．よって，身長の分布が一致します．

身長以外の点，例えば体重とかほくろの数とか細胞数についても，同じ理屈を使うと分布が一致することが分かります．

![QとRの他の要素の分布](/img/stats/QとRの他の要素の分布.png){.py-3}

よって，私たちが知り得るものであれ，知り得ないものであれ，すべての性質の分布が同一になることが分かります．

であれば，この実験において，ステップ2の複製は必要ありません．

![かんぜんな実験の図](/img/stats/5人の子供の集団ver.png){.pb-3}

そのかわりに，

1. 元の集団からランダムサンプリングして半分を抜き出す
2. 残った集団を薬群に，抜き出した集団をプラセボ群にする．

という方法で，元の集団と同一の集団を2つ作って，薬群とプラセボ群に分けることができます．これは，集団の構成員1人1人に1/2の確率で(つまりランダムに)薬を飲むのかプラセボを飲むのかを割り当てても同じことなので，ランダム割当とも呼ばれます．

<img src="/img/stats/ランダム割当.png" alt="" style="width: 380px;" class="py-3">

こうして考えると，もう１つの困難「母集団を集めることができない」も解消されることが分かります．そもそも，母集団を集めるのは，母集団への薬の効果を調べたかったからでした．そこで，母集団への薬の効果とサンプルへの薬の効果が同じになるような良いサンプルを作ろうとしていました．

これまでの話を踏まえると，良いサンプルになるには，そのサンプルが母集団と同一の集団であれば良いでしょう．よって，母集団からランダムサンプリングによってサンプルを作ればよいことが分かります．これは，実験の対象となる集団を母集団からランダムに選んでくるという意味でランダム抽出とも呼ばれます．

<img src="/img/stats/ランダム抽出.png" alt="ランダム抽出" width="350px" class="py-4">

こうして2つの困難は次のように解決されます．

1. 母集団を集めること \\(\rightarrow \\) 母集団からランダムサンプリングでサンプルを作る(ランダム抽出)
2. 母集団を構成する1人1人を複製すること \\(\rightarrow \\) ランダムサンプリングで集団を2分割する(ランダム割当)

これで実際の行う実験の手順が分かりました．

1. ランダム抽出によって，母集団と同じ分布をもつサンプルを集める．
2. ランダム割当で薬群とプラセボ群に分け，母集団と同じ集団を2つ作る
3. 実験を行って，サンプルの差\\(m^D - m^P\\)を薬の効果と考える．

![実際の実験手順](/img/stats/実際の実験手順.png)

<small class="pb-3">注意:同じ分布をする同一の集団を同じ色で表しています</small>

ランダム抽出もランダム割当もランダムサンプリングが文脈に応じて呼び名を変えたものであり，本質的にやることに違いはありません．



